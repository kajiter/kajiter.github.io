<!DOCTYPE html>
<html>

<head><meta name="generator" content="Hexo 3.9.0">
  
  <title>iOS开发记录 - 烟雨行舟</title>
  <meta charset="UTF-8">
  <meta name="description" content>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  

  <link rel="shortcut icon" href="/favicon.ico" type="image/png">
  <meta name="description" content="iOS开发快捷方式Xcode7.0以上打开HTTP权限以Open as -&amp;gt;Source Code 的方法打开info.plist文件，然后加入以下代码这段代码放的位置不用固定 &amp;lt;key&amp;gt;NSAppTransportSecurity&amp;lt;/key&amp;gt; &amp;lt;dict&amp;gt;     &amp;lt;key&amp;gt;NSAllowsArbitraryLoads&amp;lt;/key&amp;gt;">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS开发记录">
<meta property="og:url" content="http://kajiter.github.io/2017/09/15/iOS开发记录/index.html">
<meta property="og:site_name" content="烟雨行舟">
<meta property="og:description" content="iOS开发快捷方式Xcode7.0以上打开HTTP权限以Open as -&amp;gt;Source Code 的方法打开info.plist文件，然后加入以下代码这段代码放的位置不用固定 &amp;lt;key&amp;gt;NSAppTransportSecurity&amp;lt;/key&amp;gt; &amp;lt;dict&amp;gt;     &amp;lt;key&amp;gt;NSAllowsArbitraryLoads&amp;lt;/key&amp;gt;">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2020-01-12T15:38:02.849Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS开发记录">
<meta name="twitter:description" content="iOS开发快捷方式Xcode7.0以上打开HTTP权限以Open as -&amp;gt;Source Code 的方法打开info.plist文件，然后加入以下代码这段代码放的位置不用固定 &amp;lt;key&amp;gt;NSAppTransportSecurity&amp;lt;/key&amp;gt; &amp;lt;dict&amp;gt;     &amp;lt;key&amp;gt;NSAllowsArbitraryLoads&amp;lt;/key&amp;gt;">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.15.8/styles/atom-one-dark.css">
   
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">
  
  
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css">
  <link rel="stylesheet" href="/css/style.css?v=1599984080014">
<link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body class="mdui-drawer-body-left">
  
  <div id="nexmoe-background">
    <div class="nexmoe-bg" style="background-image: url(https://i.loli.net/2019/11/25/zkSsGC7NlrM3jJ8.jpg)"></div>
    <div class="mdui-appbar mdui-shadow-0">
      <div class="mdui-toolbar">
        <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">menu</i></a>
        <div class="mdui-toolbar-spacer"></div>
        <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
        <a href="/" title="cl" class="mdui-btn mdui-btn-icon"><img src="https://i.loli.net/2019/11/25/GBCl3rmnS4aZRM6.jpg"></a>
       </div>
    </div>
  </div>
  <div id="nexmoe-header">
      <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="cl">
            <img src="https://i.loli.net/2019/11/25/GBCl3rmnS4aZRM6.jpg" alt="cl">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>22</div>
        <div><span>标签</span>0</div>
        <div><span>分类</span>0</div>
    </div>
    <ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
    </ul>
    <aside id="nexmoe-sidebar">
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">社交按钮</h3>
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://space.bilibili.com/28273557" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/kajiter/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a><a class="mdui-ripple" href="http://weibo.com/" target="_blank" mdui-tooltip="{content: 'Weibo'}" style="color: rgb(125, 23, 90);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-weibo"></i>
        </a>
    </div>
</div>
  
  

  
  
  
  
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章归档</h3>
    <div class="nexmoe-widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">十月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a></li></ul>
    </div>
  </div>


  
</aside>
    <div class="nexmoe-copyright">
        &copy; 2020 cl
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a>
    </div>
</div><!-- .nexmoe-drawer -->
  </div>
  <div id="nexmoe-content">
    <div class="nexmoe-primary">
        <div class="nexmoe-post">
    <div class="nexmoe-post-cover"> 
        
        <img src="https://i.loli.net/2019/11/28/3rvwfU9nB1ldzVo.jpg">
        
        <h1>iOS开发记录</h1>
    </div>
  <div class="nexmoe-post-meta">
    <a><i class="nexmoefont icon-calendar-fill"></i>2017年09月15日</a>
    <a><i class="nexmoefont icon-areachart"></i>976 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 4 分钟</a>
    
    
  </div>
  <article>
    <h1 id="iOS开发快捷方式"><a href="#iOS开发快捷方式" class="headerlink" title="iOS开发快捷方式"></a>iOS开发快捷方式</h1><h2 id="Xcode7-0以上打开HTTP权限"><a href="#Xcode7-0以上打开HTTP权限" class="headerlink" title="Xcode7.0以上打开HTTP权限"></a>Xcode7.0以上打开HTTP权限</h2><p>以Open as -&gt;Source Code 的方法打开info.plist文件，然后加入以下代码<br>这段代码放的位置不用固定</p>
<pre><code>&lt;key&gt;NSAppTransportSecurity&lt;/key&gt;
&lt;dict&gt;
    &lt;key&gt;NSAllowsArbitraryLoads&lt;/key&gt;
    &lt;true/&gt;
&lt;/dict&gt;</code></pre><h2 id="关于Cocopods"><a href="#关于Cocopods" class="headerlink" title="关于Cocopods"></a>关于Cocopods</h2><pre><code>pod update --verbose --no-repo-update
pod install --verbose --no-repo-update
</code></pre><h2 id="Podfile-默认初始化文本"><a href="#Podfile-默认初始化文本" class="headerlink" title="Podfile 默认初始化文本"></a>Podfile 默认初始化文本</h2><pre><code>platform :ios , '9.0'
use_frameworks!
inhibit_all_warnings!  ##屏蔽pod一切警告
target 'ProjectName’ do
  pod 'AFNetworking'
  pod 'FMDB'
  pod 'MJRefresh'
  pod 'ShareSDK3'

end
</code></pre><a id="more"></a>


<h3 id="CocoaPods中的头文件import导入时不能自动补齐的解决方法"><a href="#CocoaPods中的头文件import导入时不能自动补齐的解决方法" class="headerlink" title="CocoaPods中的头文件import导入时不能自动补齐的解决方法"></a>CocoaPods中的头文件import导入时不能自动补齐的解决方法</h3><p>选择工程的 Target -&gt; Build Settings 菜单，找到”User Header Search Paths”设置项<br>新增一个值”$(PODS_ROOT)”，并且选择”recursive”，这样xcode就会在项目目录中递归搜索文件</p>
<h3 id="CocoaPods安装教程"><a href="#CocoaPods安装教程" class="headerlink" title="CocoaPods安装教程"></a>CocoaPods安装教程</h3><h3 id="———-CocoaPods安装教程"><a href="#———-CocoaPods安装教程" class="headerlink" title="———  CocoaPods安装教程"></a>———  <a href="http://kajiter.github.io/2017/10/01/MacOS上安装-更新cocopods教程/">CocoaPods安装教程</a></h3><h2 id="系统默认的字体为："><a href="#系统默认的字体为：" class="headerlink" title="系统默认的字体为："></a>系统默认的字体为：</h2><pre><code>font-family: ".SFUIText-Regular";
font-weight: normal;
font-style: normal;
font-size: 17.00pt</code></pre><h2 id="屏蔽的方法如下"><a href="#屏蔽的方法如下" class="headerlink" title="屏蔽的方法如下:"></a>屏蔽的方法如下:</h2><p>Xcode8里边 Edit Scheme-&gt; Run -&gt; Arguments, 在Environment Variables里边添加<br><code>OS_ACTIVITY_MODE ＝ Disable</code></p>
<h1 id="关于代码："><a href="#关于代码：" class="headerlink" title="关于代码："></a>关于代码：</h1><h2 id="代码延时调用"><a href="#代码延时调用" class="headerlink" title="代码延时调用"></a>代码延时调用</h2><pre><code>[self performSelector:@selector(aaa) withObject:nil afterDelay:2];

// 或者

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(second * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
        [self dismiss];
});
</code></pre><h2 id="根据格式化标签获取时间"><a href="#根据格式化标签获取时间" class="headerlink" title="根据格式化标签获取时间"></a>根据格式化标签获取时间</h2><h3 id="unix-时间戳转换网站"><a href="#unix-时间戳转换网站" class="headerlink" title="unix 时间戳转换网站 "></a><a href="https://tool.lu/timestamp/" target="_blank" rel="noopener">unix 时间戳转换网站 </a></h3><pre><code>// Unix 时间戳1574870400000 = 北京时间：2019-11-28 00:00:00
NSString * unixTime = @"1574870400000";//模拟获得Unix时间戳,注意iOS只可处理10位的时间戳,而Android往往是13位。
NSTimeInterval interval = [[unixTime substringToIndex:10] doubleValue];//iOS只能取前10位

NSDate * date = [NSDate dateWithTimeIntervalSince1970:interval];
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"yyyy年MM月dd日 HH:mm:ss"];
NSString *timeBeijing = [format stringFromDate:date];</code></pre><h2 id="输出沙盒路径"><a href="#输出沙盒路径" class="headerlink" title="输出沙盒路径"></a>输出沙盒路径</h2><pre><code>NSLog(@"***%@",NSHomeDirectory());
</code></pre><h2 id="设置电量栏格式（白色字体）"><a href="#设置电量栏格式（白色字体）" class="headerlink" title="设置电量栏格式（白色字体）"></a>设置电量栏格式（白色字体）</h2><pre><code>application.statusBarStyle = UIStatusBarStyleLightContent;

&lt;key&gt;UIViewControllerBasedStatusBarAppearance&lt;/key&gt;
    &lt;false/&gt;
</code></pre><h2 id="TextField-注册监听事件"><a href="#TextField-注册监听事件" class="headerlink" title="TextField 注册监听事件"></a>TextField 注册监听事件</h2><pre><code>[[UITextField alloc init] addTarget:self action:@selector(textChange:) forControlEvents:UIControlEventEditingChanged];</code></pre><h2 id="生成某个字符串的大小（自动调节）"><a href="#生成某个字符串的大小（自动调节）" class="headerlink" title="生成某个字符串的大小（自动调节）"></a>生成某个字符串的大小（自动调节）</h2><pre><code>CGSize textSize = [text sizeWithAttributes:@{ NSFontAttributeName : [UIFont systemFontOfSize: textFont ] }]; //此方法只是粗略计算
</code></pre><h2 id="UIView中的坐标转换"><a href="#UIView中的坐标转换" class="headerlink" title="UIView中的坐标转换"></a>UIView中的坐标转换</h2><pre><code>- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view;
- (CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view;
- (CGRect) convertRect:(CGRect)  rect toView:(UIView *)  view;
- (CGRect) convertRect:(CGRect)  rect fromView:(UIView *)  view;</code></pre><h3 id="Spring-动画"><a href="#Spring-动画" class="headerlink" title="Spring 动画"></a>Spring 动画</h3><pre><code>+ (void)animateWithDuration:(NSTimeInterval)duration delay:(NSTimeInterval)delay usingSpringWithDamping:(CGFloat)dampingRatio initialSpringVelocity:(CGFloat)velocity options:(UIViewAnimationOptions)options animations:(void (^)(void))animations completion:(void (^)(BOOL finished))completion
</code></pre><h2 id="获取字符串前N位的字符（用于替代StringReplacing方法）"><a href="#获取字符串前N位的字符（用于替代StringReplacing方法）" class="headerlink" title="获取字符串前N位的字符（用于替代StringReplacing方法）"></a>获取字符串前N位的字符（用于替代StringReplacing方法）</h2><pre><code>NSString * beforeStr = [_textView.text substringWithRange:NSMakeRange(0, 20)];
_textView.text = beforeStr;
</code></pre><h2 id="用CAlayer代替-UIImageView"><a href="#用CAlayer代替-UIImageView" class="headerlink" title="用CAlayer代替 UIImageView"></a>用CAlayer代替 UIImageView</h2><pre><code>CALayer * imageLayer = [CALayer layer];
imageLayer.frame = CGRectMake(0, 64, 100, 100);
UIImage * image = [UIImage imageNamed:@""];
imageLayer.contents = (id)image;
imageLayer.backgroundColor = [UIColor magentaColor].CGColor;
[self.view.layer addSublayer:imageLayer];
</code></pre><h2 id="MJ-Refresh-出现Too-much-的解决方法："><a href="#MJ-Refresh-出现Too-much-的解决方法：" class="headerlink" title="MJ Refresh 出现Too much   的解决方法："></a>MJ Refresh 出现Too much   的解决方法：</h2><h3 id="选中项目-Project-Build-Settings-Apple-LLVM-6-0-Preprocessing中的Enable-Strict-Checking-of-objc-msgsend-calls-设置为-NO-即可"><a href="#选中项目-Project-Build-Settings-Apple-LLVM-6-0-Preprocessing中的Enable-Strict-Checking-of-objc-msgsend-calls-设置为-NO-即可" class="headerlink" title="选中项目 - Project - Build Settings-Apple LLVM 6.0-Preprocessing中的Enable Strict Checking of objc_msgsend calls 设置为 NO 即可"></a>选中项目 - Project - Build Settings-Apple LLVM 6.0-Preprocessing中的Enable Strict Checking of objc_msgsend calls 设置为 NO 即可</h3><h2 id="TableView或CollectionView获取刷新完成状态"><a href="#TableView或CollectionView获取刷新完成状态" class="headerlink" title="TableView或CollectionView获取刷新完成状态"></a>TableView或CollectionView获取刷新完成状态</h2><pre><code>[tableView performBatchUpdates:^{ } ];
</code></pre><h2 id="TableViewCell-的样式和颜色"><a href="#TableViewCell-的样式和颜色" class="headerlink" title="TableViewCell 的样式和颜色"></a>TableViewCell 的样式和颜色</h2><pre><code>cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator; //右箭头图标

TableViewCell选中状态颜色设置
cell.selectionStyle = UITableViewCellSelectionStyleNone;  

自定义UITableViewCell选中时背景色：
cell.selectedBackgroundView = [[UIView alloc] initWithFrame:cell.frame];  
cell.selectedBackgroundView.backgroundColor = CustomColor;  

自定义UITableViewCell选中时背景
cell.selectedBackgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@“image”]] ;  

Cell上字体颜色  
cell.textLabel.highlightedTextColor = HighLightedTextColor;
[cell.textLabel setTextColor: NomalColor] ;

设置tableViewCell间的分割线的颜色
[tableView setSeparatorColor:[UIColor xxxx ]]; 
</code></pre><h2 id="自定义-Log-带错误所在函数"><a href="#自定义-Log-带错误所在函数" class="headerlink" title="自定义 Log 带错误所在函数"></a>自定义 Log 带错误所在函数</h2><pre><code>#ifdef DEBUG #define DDLOG(...) printf(" %s\n",[[NSString stringWithFormat:__VA_ARGS__]UTF8String]);
#define DDLOG_CURRENT_METHOD NSLog(@"%@-%@", NSStringFromClass([self class]), NSStringFromSelector(_cmd)) #else #define DDLOG(...) ; 
#define DDLOG_CURRENT_METHOD ; 
#endif</code></pre><h2 id="判断用户权限是否打开"><a href="#判断用户权限是否打开" class="headerlink" title="判断用户权限是否打开"></a>判断用户权限是否打开</h2><pre><code>//从相册选取
ALAuthorizationStatus author = [ALAssetsLibrary authorizationStatus];
if (author == ALAuthorizationStatusRestricted || author ==ALAuthorizationStatusDenied){
            NSLog(@"相册 未授权");
            MyAlertViewWenXin(@"请在iPhone的“设置-隐私-照片”中允许好实在访问您的照片");
        }else{
            NSLog(@"相册 已授权");
}

//使用相机拍摄        
NSString *mediaType = AVMediaTypeVideo;
AVAuthorizationStatus authStatus = [AVCaptureDevice authorizationStatusForMediaType:mediaType];
if(authStatus == AVAuthorizationStatusRestricted || authStatus == AVAuthorizationStatusDenied){
            NSLog(@"will 相机权限受限");
            MyAlertViewWenXin(@"请在iPhone的“设置-隐私-相机”中允许好实在访问您的相机");
        }else{
            NSLog(@"will 相机功能打开");
        }

//您的定位服务
if([CLLocationManager locationServicesEnabled] &amp;&amp; [CLLocationManager authorizationStatus] != kCLAuthorizationStatusDenied) {
        NSLog(@"will 已开启");
    }else{
        NSLog(@"will 未开启");
        MyAlertViewWenXin(@"请在iPhone的“设置-隐私-定位服务”中允许好实在访问您的定位服务");
}</code></pre><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
  </article>
  
    
<div class="nexmoe-post-copyright">
<i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
<strong>本文作者：</strong>cl<br>
<strong>本文链接：</strong><a href="http://kajiter.github.io/2017/09/15/iOS开发记录/" title="http://kajiter.github.io/2017/09/15/iOS开发记录/" target="_blank" rel="noopener">http://kajiter.github.io/2017/09/15/iOS开发记录/</a><br>

  <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可

</div>


  
  <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '80b2453b6d5f37ad6225',
        clientSecret: '43e99fa852795c9a7b3eb924b2558c64b84bbdeb',
        id: window.location.pathname,
        repo: 'nexmoe.github.io',
        owner: 'nexmoe',
        admin: 'nexmoe'
    })
    gitalk.render('gitalk')
</script>
</section>
</div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
 
    <script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>


 
    <script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script>


<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.8/build/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script src="/js/app.js?v=1599984080017"></script>
<script src="https://cdn.jsdelivr.net/npm/lazysizes@5.1.0/lazysizes.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/xtaodada/xtaodada.github.io@0.0.2/copy.js"></script>



  





</body>

</html>
